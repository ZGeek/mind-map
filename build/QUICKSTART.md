# å¿«é€Ÿå¼€å§‹æŒ‡å—

## å…‹éš†æ–°ä»£ç ä»“åº“åçš„æ“ä½œ

### æœ€ç®€å•çš„æ–¹å¼ï¼ˆä¸€é”®å¯åŠ¨ï¼‰

```bash
# 1. è¿›å…¥æ„å»ºç›®å½•
cd yzq_build

# 2. æ„å»ºé•œåƒï¼ˆä»æºç æ„å»ºæˆå¯æ‰§è¡Œçš„é•œåƒï¼‰
make build

# 3. å¯åŠ¨å®¹å™¨ï¼ˆé»˜è®¤ç«¯å£ 80ï¼‰
make run

# æˆ–è€…æŒ‡å®šç«¯å£å¯åŠ¨
make run PORT=8080
```

## å‘½ä»¤è¯´æ˜

### 1. `make build` - æ„å»ºé•œåƒ

ä»æºç æ„å»ºæˆå¯æ‰§è¡Œçš„ Docker é•œåƒï¼Œè‡ªåŠ¨æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. **å®‰è£…ä¾èµ–** - åœ¨ `web/` ç›®å½•æ‰§è¡Œ `yarn install`
2. **ç¼–è¯‘é¡¹ç›®** - æ‰§è¡Œ `yarn build` ç¼–è¯‘å‰ç«¯ä»£ç 
3. **æ„å»ºé•œåƒ** - ä½¿ç”¨ nginx å°†ç¼–è¯‘äº§ç‰©æ‰“åŒ…æˆ Docker é•œåƒ

**æ‰§è¡Œæ—¶é—´ï¼š** é¦–æ¬¡æ„å»ºå¯èƒ½éœ€è¦å‡ åˆ†é’Ÿï¼ˆå®‰è£…ä¾èµ–ï¼‰ï¼Œåç»­æ„å»ºä¼šæ›´å¿«ã€‚

**è¾“å‡ºï¼š** ç”Ÿæˆé•œåƒ `mind-map:latest`

### 2. `make run` - å¯åŠ¨å®¹å™¨

å¯åŠ¨åˆšæ‰æ„å»ºçš„é•œåƒã€‚

**é»˜è®¤ç«¯å£ï¼š** 80

**æŒ‡å®šç«¯å£ï¼š**
```bash
# ä½¿ç”¨ 8080 ç«¯å£
make run PORT=8080

# ä½¿ç”¨ 3000 ç«¯å£
make run PORT=3000
```

**è¯´æ˜ï¼š**
- å¦‚æœå®¹å™¨å·²å­˜åœ¨ï¼Œä¼šè‡ªåŠ¨åœæ­¢å¹¶åˆ é™¤æ—§å®¹å™¨
- å®¹å™¨åç§°ï¼š`mind-map-container`
- è®¿é—®åœ°å€ï¼š`http://localhost:ç«¯å£å·`

## å®Œæ•´ä½¿ç”¨æµç¨‹

### æ–°å…‹éš†ä»£ç å

```bash
# 1. è¿›å…¥æ„å»ºç›®å½•
cd yzq_build

# 2. æ„å»ºé•œåƒï¼ˆé¦–æ¬¡éœ€è¦å®‰è£…ä¾èµ–ï¼Œå¯èƒ½éœ€è¦å‡ åˆ†é’Ÿï¼‰
make build

# 3. å¯åŠ¨å®¹å™¨
make run

# 4. è®¿é—®åº”ç”¨
# æµè§ˆå™¨æ‰“å¼€ http://localhost
```

### æ›´æ–°ä»£ç åé‡æ–°éƒ¨ç½²

```bash
cd yzq_build

# é‡æ–°æ„å»ºé•œåƒ
make build

# å¯åŠ¨æ–°å®¹å™¨ï¼ˆä¼šè‡ªåŠ¨åœæ­¢æ—§å®¹å™¨ï¼‰
make run
```

### ä½¿ç”¨è‡ªå®šä¹‰ç«¯å£

```bash
cd yzq_build

# æ„å»ºé•œåƒ
make build

# ä½¿ç”¨ 8080 ç«¯å£å¯åŠ¨
make run PORT=8080

# è®¿é—® http://localhost:8080
```

## å‰ææ¡ä»¶

ç¡®ä¿ä½ çš„ç³»ç»Ÿå·²å®‰è£…ï¼š

1. **Node.js å’Œ Yarn**
   ```bash
   # æ£€æŸ¥æ˜¯å¦å®‰è£…
   node --version
   yarn --version
   
   # å¦‚æœæœªå®‰è£… yarn
   npm install -g yarn
   ```

2. **Docker**
   ```bash
   # æ£€æŸ¥æ˜¯å¦å®‰è£…
   docker --version
   
   # å¦‚æœæœªå®‰è£…ï¼Œè¯·å‚è€ƒ Docker å®˜æ–¹æ–‡æ¡£å®‰è£…
   ```

## å¸¸ç”¨ Docker å‘½ä»¤

### æŸ¥çœ‹å®¹å™¨çŠ¶æ€
```bash
docker ps -a | grep mind-map
```

### æŸ¥çœ‹å®¹å™¨æ—¥å¿—
```bash
docker logs -f mind-map-container
```

### åœæ­¢å®¹å™¨
```bash
docker stop mind-map-container
```

### åˆ é™¤å®¹å™¨
```bash
docker rm mind-map-container
```

### åˆ é™¤é•œåƒ
```bash
docker rmi mind-map:latest
```

## å¸¸è§é—®é¢˜

### Q: æ‰§è¡Œ `make build` æŠ¥é”™æ‰¾ä¸åˆ° yarnï¼Ÿ
A: éœ€è¦å…ˆå®‰è£… yarnï¼š`npm install -g yarn`

### Q: æ‰§è¡Œ `make build` æŠ¥é”™æ‰¾ä¸åˆ° dockerï¼Ÿ
A: éœ€è¦å…ˆå®‰è£… Dockerï¼Œå‚è€ƒ Docker å®˜æ–¹æ–‡æ¡£

### Q: ç«¯å£è¢«å ç”¨æ€ä¹ˆåŠï¼Ÿ
A: ä½¿ç”¨ `make run PORT=å…¶ä»–ç«¯å£` æŒ‡å®šå…¶ä»–ç«¯å£ï¼Œä¾‹å¦‚ï¼š
```bash
make run PORT=8080
```

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ
```bash
docker logs -f mind-map-container
```

### Q: å¦‚ä½•è¿›å…¥å®¹å™¨æŸ¥çœ‹ï¼Ÿ
```bash
docker exec -it mind-map-container sh
```

### Q: æ„å»ºå¤±è´¥æ€ä¹ˆåŠï¼Ÿ
- æ£€æŸ¥ç½‘ç»œè¿æ¥ï¼ˆéœ€è¦ä¸‹è½½ npm åŒ…ï¼‰
- æ£€æŸ¥ç£ç›˜ç©ºé—´
- æŸ¥çœ‹é”™è¯¯ä¿¡æ¯ï¼Œé€šå¸¸æ˜¯ä¾èµ–å®‰è£…é—®é¢˜

### Q: å®¹å™¨å¯åŠ¨å¤±è´¥æ€ä¹ˆåŠï¼Ÿ
- æ£€æŸ¥é•œåƒæ˜¯å¦å­˜åœ¨ï¼š`docker images | grep mind-map`
- æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼š`docker logs mind-map-container`
- æ£€æŸ¥ç«¯å£æ˜¯å¦è¢«å ç”¨

## æ€»ç»“

**å¯¹äºæ–°å…‹éš†çš„ä»£ç ä»“åº“ï¼Œåªéœ€è¦ï¼š**

```bash
cd yzq_build
make build    # æ„å»ºé•œåƒ
make run      # å¯åŠ¨å®¹å™¨ï¼ˆé»˜è®¤ç«¯å£ 80ï¼‰
```

**æˆ–è€…æŒ‡å®šç«¯å£ï¼š**

```bash
cd yzq_build
make build
make run PORT=8080
```

**å°±è¿™ä¹ˆç®€å•ï¼** ğŸš€
